{% extends 'base_admin.html.twig' %}

{% block stylesheets %} 
    {{ parent() }}    
    <link rel="stylesheet" href="{{ asset('bundles/AppBundle/css/bombillo.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/revealjs/css/reveal.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/revealjs/css/theme/moon.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/bootstrapTour/bootstrap-tour.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/jquery-ui/jquery-ui.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/elfinder/css/elfinder.full.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/elfinder/css/theme.css') }}">

    <link rel="stylesheet" href="{{ asset('assets/vendor/quiz/slickQuiz.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/quiz/master.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/steps/jquery.steps.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/toastr/toastr.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/moovly/css/videojs/video-js.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendor/moovly/css/main.css') }}">


    <style>
        
        
        .window {
            
            height: 300px;
            background-color: #f2f1f0;
            -webkit-transition: 1s;
            transition: 1s;
        }
.window .topbar {
  height: 40px;
  width: 100%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  background-image: -webkit-linear-gradient(#65645e, #3c3b37);
  background-image: linear-gradient(#65645e, #3c3b37);
  
  border-bottom: 1px solid #302f2c;
}
.window .topbar p {
  color: #dfdbd0;
  margin-left: 20px;
}
.window .topbar .icons {
  background-image: -webkit-linear-gradient(#363632, #4e4d48);
  background-image: linear-gradient(#363632, #4e4d48);
  margin-left: 15px;
  border-radius: 500px;
  padding-top: 2px;
  padding-bottom: 1px;
  padding-left: 3px;
  padding-right: 3px;
}
.window .topbar .icons .close {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-image: -webkit-linear-gradient(#f79674, #df5106);
  background-image: linear-gradient(#f79674, #df5106);
  display: inline-block;
}
.window .topbar .icons .close:hover {
  background-image: -webkit-linear-gradient(#f8a082, #f85c09);
  background-image: linear-gradient(#f8a082, #f85c09);
}
.window .topbar .icons .hide,
.window .topbar .icons .maximize {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  margin-left: 5px;
  background-image: -webkit-linear-gradient(#989792, #5a5a55);
  background-image: linear-gradient(#989792, #5a5a55);
  display: inline-block;
}
.window .topbar .icons .hide:hover,
.window .topbar .icons .maximize:hover {
  background-image: -webkit-linear-gradient(#a2a19d, #6b6b65);
  background-image: linear-gradient(#a2a19d, #6b6b65);
}

.window .wtitle{
    font-size:14px;
    font-weight: bold;
}

.window .tools {
  height: 30px;
  width: 100%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  background-color: #3c3b37;
  color: #dfdbd0;
}
        
        
        .acomodar{
            margin-top: 10px;             
        }

        .seq {
            z-index: 1;
        }
        
        
    #console {
        margin: 0;
        padding: 0;
        display: table;
        width: 100%;
        white-space: nowrap;
        color: #FFFFFF;
        background-color: #281022;
        height: 15px;        
    }
    
    #console-panel{
        background-color: #281022; 
        overflow-y: scroll;
        height: 300px;
    }
    
   
    #console div {
        display: table-cell;
        width: auto;
    }

    #console #command {
        width: 100%;
    }

    #console input {
        border: none;
        outline: none;
        background: transparent;
        width: 100%;
    }

    #console input:focus {
        outline: none;
    }
    
    #preConsole {
        border: none;
        margin:0;
        /*padding-top: 50px;*/
        white-space: pre;
        background-color: #281022;
        color: white;
    }

    #preCode {
        color: gray;
        font-family: inherit;
        font-size: inherit;
    }
    
    .error {
        color: red;
    }
        
        

    </style>


{% endblock %}

{% block tituloCurso %} Bienvido a tu curso: {{ inscripcion.idCursoGrupo.idCurso.nombre }} {% endblock %}

{% block mainTitle %} 
    <div class="row wrapper border-bottom white-bg page-heading" id="tour1">

        <div class="col-sm-4" >                     
            <ol class="breadcrumb">
                <li>
                    
                    <h4><img id="guardado" src="{{ asset('images/course/lightbulbOn6.png') }}" width="36px" /><img id="loadingBulb" src="{{ asset('images/course/bulb.gif') }}" width="36px" /> Progreso del Curso</h4>
                </li>


                <li class="tooltip-demo" id="tour2">                        
                    {% for temas in cursoModulo.temas %} 
                        {% if temas.orden < avance  %}
                            <a class="fa fa-github fa-2x encendido" data-toggle="tooltip" data-placement="top" title="{{ temas.orden}}: {{temas.idTema.nombre}}"></a>
                        {% elseif temas.orden == avance %}
                            <a class="fa fa-github fa-2x current" data-toggle="tooltip" data-placement="top"  title="{{ temas.orden}}: {{temas.idTema.nombre}}"></a>
                        {% elseif temas.orden > avance  %}
                            <a class="fa fa-github fa-2x" data-toggle="tooltip" data-placement="top"  title="{{ temas.orden}}: {{temas.idTema.nombre}}"></a>
                        {% endif %}                            
                    {% endfor %}


                </li>
            </ol>
        </div>
        <div class="col-sm-8">
            <div class="title-action">
                <a href="#" class="btn btn-primary startTour">Tour por mi aula virtual</a>
            </div>
        </div>


    </div>

{% endblock %}



{% block body %} 



    <div class="row">
        <div class="col-lg-7" style="height:400px" id="tour3" >

           <div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Reveal.js</h1>
					<h3>The HTML Presentation Framework</h3>
					<p>
						<small>Created by <a href="http://hakim.se">Hakim El Hattab</a> / <a href="http://twitter.com/hakimel">@hakimel</a></small>
					</p>
				</section>

				<section>
					<h2>Hello There</h2>
					<p>
						reveal.js enables you to create beautiful interactive slide decks using HTML. This presentation will show you examples of what it can do.
					</p>
				</section>

				<!-- Example of nested vertical slides -->
				<section>
					<section>
						<h2>Vertical Slides</h2>
						<p>Slides can be nested inside of each other.</p>
						<p>Use the <em>Space</em> key to navigate through all slides.</p>
						<br>
						<a href="#" class="navigate-down">
							<img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section>
						<h2>Basement Level 1</h2>
						<p>Nested slides are useful for adding additional detail underneath a high level horizontal slide.</p>
					</section>
					<section>
						<h2>Basement Level 2</h2>
						<p>That's it, time to go back up.</p>
						<br>
						<a href="#/2">
							<img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Up arrow" style="transform: rotate(180deg); -webkit-transform: rotate(180deg);">
						</a>
					</section>
				</section>

				<section>
					<h2>Slides</h2>
					<p>
						Not a coder? Not a problem. There's a fully-featured visual editor for authoring these, try it out at <a href="http://slides.com" target="_blank">http://slides.com</a>.
					</p>
				</section>

				

			</div>

		</div> 

            


        </div>

        <div class="col-lg-5">
            <ul class="stat-list">
                <li>

                    <small>Progreso de este nivel</small>
                    <div class="stat-percent">0%</div>
                    <div class="progress progress-mini">
                        <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 10%;" class="progress-bar"></div>
                    </div>
                </li>
                <li>
                    <div class="row">
                        <div class="col-lg-5">
                    Logros disponibles en este Nivel:
                    </div>
                        <div class="col-lg-7">
                    <div class="tooltip-demo">                        
                        {% set contadorObtenidos = 0 %}
                        {% for logroD in logrosDisponibles %}
                            {% set obtenido = false %}
                            {% for logroO in logrosObtenidos %}                                
                                {% if logroO.idCursoModuloTemaLogro.id == logroD.id %}
                                    {% set contadorObtenidos = contadorObtenidos + 1 %}
                                    {% set obtenido = true %}
                                {% endif %}                                    
                            {% endfor %}
                            {% if not obtenido %}
                                <span id="{{ logroD.nombreCorto }}"  data-toggle="tooltip" data-placement="top" title="{{ logroD.nombre }}" class="fa-stack has-badge" data-count="{{ logroD.badge }}">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-{{ logroD.imagen }} fa-stack-1x fa-inverse"></i>
                                </span>
                            {% else %}                                                                
                                {% if logroD.id == 2 %}
                                   <input type="hidden" id="quizOpen" value="true" />
                                {% endif %}
                                <span id="{{ logroD.nombreCorto }}"  data-toggle="tooltip" data-placement="top" title="{{ logroD.nombre }}" class="fa-stack has-badge" data-count="{{ logroD.badge }}">
                                        <i class="fa fa-circle fa-stack-2x text-warning"></i>
                                        <i class="fa fa-{{ logroD.imagen }} fa-stack-1x fa-inverse"></i>
                                </span>
                            {% endif %}
                        {% endfor %}
                        
                           {% if contadorObtenidos > 0 %}
                              <input type="hidden" id="contadorObtenidos" value="{{ contadorObtenidos }}" /> 
                           {% endif %}
                    
                        </div>
                            </div>
                    </div>
                </li>


            </ul>
        </div>


                        
        <div class="col-lg-5 acomodar">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Mis Evaluaciones</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#">Config option 1</a>
                            </li>
                            <li><a href="#">Config option 2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content profile-content">

                    <div id="slickQuiz">
                        <h1 class="quizName"><!-- where the quiz name goes --></h1>

                        <div class="quizArea">
                            <div class="quizHeader">
                                <!-- where the quiz main copy goes -->

                                <a class="button_quiz startQuiz" id="btnQuiz" href="#">Comenzar Quiz!</a>
                                
                            </div>

                            <!-- where the quiz gets built -->
                        </div>

                        <div class="quizResults">
                            <h3 class="quizScore">Tus Puntos: <span><!-- where the quiz score goes --></span></h3>

                            <h3 class="quizLevel"><strong>Nivel:</strong> <span><!-- where the quiz ranking level goes --></span></h3>
                            <a class="next_class btn btn-success" id="next_class" <a href="{{ path('estudiante_curso_programacion', { 'id': inscripcion.id, 'avance': avance + 1 }) }}">siguiente Clase!</a>
                                <input id="inscripcion" type="hidden" value="{{ inscripcion.id }}" />
                                <input id="url_ajax" type="hidden" value="{{ url('ajax_progreso') }}" />
                                <input id="url_avance" type="hidden" value="{{ url('ajax_avance') }}" />
                                <input id="tema_actual" type="hidden" value="{{ temaActual.id }}" />
                                <input id="url_evaluacion" type="hidden" value="{{ url('ajax_evaluacion') }}" />
                            <div class="quizResultsCopy">
                                <!-- where the quiz result copy goes -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!--row -->



    <div class="row">
        <div class="col-lg-7 acomodar" id="tour4">
            
                <div class="window" id="console-panel">
                    <div class="topbar">
                      <div class="icons">
                        <div class="close"></div>
                        <div class="hide"></div>
                        <div class="maximize"></div>
                      </div>
                      <p class="wtitle">Terminal</p>
                    </div>

                    <pre id="preConsole"></pre>
                    <form id="console">
                        <div id="currentDirName">{{ currentDirName }}/ </div>
                        <div>{{ currentUser }}$></div>
                        <div id="command"><input id="inputConsole" type="text" value=""></div>
                    </form>
                </div>
                
            

        </div>


        <div class="col-lg-5 acomodar">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Mi directorio</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#">Config option 1</a>
                            </li>
                            <li><a href="#">Config option 2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content profile-content">

                    <div id="elfinder"></div>
                </div>
            </div>
        </div>


    </div>

    <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="flipbook-viewport">
                    <div class="container">
                        <div class="flipbook">
                            <div style="background-image:url({{ asset('images/books/1.jpg') }})"></div>
                            <div style="background-image:url({{ asset('images/books/2.png') }})"></div>
                            <div style="background-image:url({{ asset('images/books/3.jpg') }})"></div>
                            <div style="background-image:url({{ asset('images/books/4.jpg') }})"></div>
                            <div style="background-image:url({{ asset('images/books/5.jpg') }})"></div>
                            <div style="background-image:url({{ asset('images/books/1.jpg') }})"></div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
                        
                        
                        
                        
                        
    <div class="modal fade bs-modal-video" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">

                <video id="myMoov" poster="{{ asset('assets/vendor/moovly/videos/local.jpg') }}"  width="854" height="481" class="video-js vjs-default-skin vjs-big-play-centered vjs-controls-enabled vjs-has-started vjs-user-active" controls preload="none" data-setup='{"children": { "loadingSpinner": true, "controlBar": { "children": {"currentTimeDisplay": false, "timeDivider": false, "durationDisplay": false ,"volumeControl":false, "muteToggle":false}}}}'>                    
                    <source src="{{ asset('assets/vendor/moovly/videos/local.webm') }}" type='video/webm'/>
                    <source src="{{ asset('assets/vendor/moovly/videos/local.mp4') }}" type='video/mp4'/>
                    <source src="{{ asset('assets/vendor/moovly/videos/local.ogg') }}" type='video/ogg'/>
                    <p class="vjs-no-js">Para poder ver este video, necesita tener habilitado javascript y un navegador actualizado <a href="http://videojs.com/html5-video-support/" target="_blank">que soporte video con HTML 5</a></p>
                </video>

            </div>
        </div>
    </div>
                    
                    
    <div class="modal fade bs-modal-video2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">

                <video id="myMoov" poster="{{ asset('assets/vendor/moovly/videos/local.jpg') }}"  width="854" height="481" class="video-js vjs-default-skin vjs-big-play-centered vjs-controls-enabled vjs-has-started vjs-user-active" controls preload="none" data-setup='{"children": { "loadingSpinner": true, "controlBar": { "children": {"currentTimeDisplay": false, "timeDivider": false, "durationDisplay": false ,"volumeControl":false, "muteToggle":false}}}}'>                    
                    <source src="{{ asset('assets/vendor/moovly/videos/central.webm') }}" type='video/webm'/>
                    <source src="{{ asset('assets/vendor/moovly/videos/central.mp4') }}" type='video/mp4'/>
                    <source src="{{ asset('assets/vendor/moovly/videos/central.ogg') }}" type='video/ogg'/>
                    <p class="vjs-no-js">Para poder ver este video, necesita tener habilitado javascript y un navegador actualizado <a href="http://videojs.com/html5-video-support/" target="_blank">que soporte video con HTML 5</a></p>
                </video>

            </div>
        </div>
    </div>



{% endblock %}

{% block javascripts %} 
    {{ parent() }}    
    
    <script src="{{ asset('assets/vendor/elfinder/js/elfinder.full.js') }}"type="text/javascript" ></script>
    <script src="{{ asset('assets/vendor/elfinder/js/i18n/elfinder.es.js') }}"type="text/javascript" ></script>
    
    <script src="{{asset('assets/vendor/revealjs/lib/js/head.min.js')}}" type="text/javascript"></script>    
    <script src="{{asset('assets/vendor/revealjs/js/reveal.js')}}" type="text/javascript"></script>    
    
    <script src="{{asset('assets/vendor/bootstrapTour/bootstrap-tour.min.js')}}" type="text/javascript"></script>  
    <script src="{{asset('assets/vendor/modernizr/modernizr.2.5.3.min.js')}}" type="text/javascript"></script>  
    <script src="{{asset('assets/vendor/steps/jquery.steps.min.js')}}" type="text/javascript"></script>      
    <script src="{{asset('assets/vendor/quiz/slickQuiz-config.js')}}" type="text/javascript"></script>  
    <script src="{{asset('assets/vendor/quiz/slickQuiz.js')}}" type="text/javascript"></script>  
    <script src="{{asset('assets/vendor/quiz/master.js')}}" type="text/javascript"></script>  
    <script src="{{asset('assets/vendor/toastr/toastr.min.js')}}" type="text/javascript"></script>  
    <script src="{{asset('assets/vendor/moovly/js/videojs/video.js')}}" type="text/javascript"></script>
    



    <script type="text/javascript">
        
        /**
     * Windows variables.
     */
    window.topDir = '{{ currentDir }}';
    window.currentDir = '{{ currentDir }}';
    window.currentDirName = window.currentDir.split('/').pop();
    window.currentUser = '{{ currentUser }}';
    window.titlePattern = "* — console";
    window.document.title = window.titlePattern.replace('*', window.currentDirName);

        jQuery(function ($) {
            
            
            Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: "{{ asset('assets/vendor/revealjs/lib/js/classList.js') }}", condition: function() { return !document.body.classList; } },
					{ src: "{{ asset('assets/vendor/revealjs/plugin/markdown/marked.js') }}", condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: "{{ asset('assets/vendor/revealjs/plugin/markdown/markdown.js') }}", condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: "{{ asset('assets/vendor/revealjs/plugin/highlight/highlight.js') }}", async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: "{{ asset('assets/vendor/revealjs/plugin/zoom-js/zoom.js') }}", async: true },
					{ src: "{{ asset('assets/vendor/revealjs/plugin/notes/notes.js') }}", async: true }
				]
			});

            
          
            
        var screen = $('#preConsole');
        var input = $('#inputConsole').focus();
        var form = $('#console');
        var scroll = function () {
            window.scrollTo(0, document.body.scrollHeight);
        };
        //input.history();
        //input.autocomplete(<?php echo json_encode($autocomplete); ?>);
        form.submit(function () {
            
            
            var command = $.trim(input.val());
            if (command == '') {               
                return false;
            }

            $("<code id='preCode'>" + window.currentDirName + "&nbsp;" + window.currentUser + "$&nbsp;" + command + "</code><br>").appendTo(screen);
            
            //scroll();
            input.val('');
            form.hide();
            //input.addHistory(command);
           var data3 = {command: command, cd: window.currentDir, user: window.currentUser};
           $.ajax({
                        method: "GET",
                        url: "{{ url('ajax_console') }}",
                        async: true,
                        cache: false,
                        data: data3,
                        //timeout: 50000,
                        success: function (data) {
                                console.log(data);
                                 
                                var pattern = /^set current directory (.+?)$/i;
                                if (matches = data.salida.match(pattern)) {
                                    console.log(matches);
                                    window.currentDir = matches[1];
                                    window.currentDirName = window.currentDir.split('/').pop() + "/";
                                    $('#currentDirName').text(window.currentDirName);
                                    window.document.title = window.titlePattern.replace('*', window.currentDirName);
                                }else{                                                                  
                                    if(data.salida !== ""){ 
                                        if(data.comando){
                                            if (data.comando.match($gitVersion)) {
                                                toastr.success("has ejecutado tu primer comando en GIT", 'Excelente');                                            
                                                $("#reto1").val("Correcto, si tenemos Git instalado y nos especifica el número de versión que tenemos instalada.")
                                            }
                                        }
                                       screen.append(data.salida);
                                   }else{
                                       screen.append(data.error);
                                   }
                               }
                         },
                        error: function (XMLHttpRequest, textStatus, errorThrown) { 
                              console.log(errorThrown, textStatus, XMLHttpRequest);
                              
                              //setTimeout(waitForMsg, 300000);

                        },
                        complete: function(){
                           form.show(); 
                           $('#inputConsole').focus();
                        }

                    });
            return false;
        });
            
            
            
            $('#elfinder').elfinder({
                    url : "{{ asset('assets/vendor/elfinder/php/connector.minimal.php')}}", 
                    lang: 'es',
                    height: 250,
                    customData  : {user: window.currentUser},
                    handlers : {
                        dblclick : function(event, elfinderInstance) {
                          event.preventDefault();
                          elfinderInstance.exec('getfile')
                            .done(function() { elfinderInstance.exec('quicklook'); })
                            .fail(function() { elfinderInstance.exec('open'); });
                        }
                      },

                      getFileCallback : function(files, fm) {
                        return false;
                      },
                    uiOptions: {
                        toolbar : [
                            // toolbar configuration
                            ['open'],
                            ['home', 'up'],
                            ['info'],
                            ['reload'],
                            ['quicklook'],                                                                        
                            ['view'],
                            ['help']
                        ]
                     },
                
                    contextmenu : {
                            // navbarfolder menu
                            navbar : ['open', '|', 'copy', 'cut', 'paste', 'duplicate', '|', 'rm', '|', 'info'],

                            // current directory menu
                            cwd    : [ 'back', '|', 'mkdir', 'mkfile', 'paste', '|', 'info'],

                            // current directory file menu
                            files  : [
                                'open', 'quicklook', '|',
                                'rm', '|', 'edit', 'rename', 'info'
                            ]
                    }
            });
            
            
            
           toastr.options = {
            "closeButton": true,
            "debug": true,
            "newestOnTop": false,
            "progressBar": true,
            "positionClass": "toast-top-center",
            "preventDuplicates": true,
            "onclick": null,
            "showDuration": "50000",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "slideDown",
            "hideMethod": "fadeOut"            
          };
            
            
            
            $('#terminal').terminal(function (command, term) {
                var $inter = evaluar(command);
                
                if ($inter.chk === true) {
                    term.echo("[[;green;]" + $inter.out + "]");
                    setTimeout(function () {
                        toastr.success($inter.msg, 'Excelente');
                    }, 1200);
                } else if ($inter.chk === "done") {
                    term.echo("[[;green;]" + $inter.out + "]");
                    toastr.info($inter.msg,'Ya ejecutado!');
                } else if ($inter.chk === "plain") {
                    term.echo($inter.out);
                    setTimeout(function () {
                        toastr.success($inter.msg, 'Excelente');
                    }, 1200);

                } else {
                    term.echo("[[;red;]" + $inter.out + "]");
                }
                
                if($inter.fin){  
                    var data = {inscripcion : $('#inscripcion').val(), logro: 2};
                    var url = $('#url_ajax').val();
                    
                    $("#btnQuiz").prop('disabled', false);
                    $("#btnQuiz").attr('disabled', false);                    
                    $.ajax({
                        method: "GET",
                        url: url,
                        async: true,
                        cache: false,
                        data: data,
                        //timeout: 50000,
                        success: function (data) {
                                 $('.progress-bar').attr('aria-valuenow', '60');
                                 $('.progress-bar').css('width', '60%');
                                 $('.stat-percent').html('60%');
                                 
                                 console.log(data);                   
                                /*if(posts.length > 0)
                                 {
                                     var html = "";
                                     for(d in posts)
                                     {
                                         html += "<p>" + JSON.stringify(posts[d]) + "</p>";
                                     }
                                     $("#contador_solicitudes").append(html);
                                 }*/
                                //$("#contador_solicitudes").html(posts);
                                 //setTimeout(waitForMsg, 60000);
                         },
                        error: function (XMLHttpRequest, textStatus, errorThrown) { 
                              console.log(errorThrown, textStatus, XMLHttpRequest);
                              //setTimeout(waitForMsg, 300000);

                        }

                    });
                    
                    
                    toastr.info("Has obtenido el logro de Primeros comandos en GIT",'FELICITACIONES! Logro Desbloqueado!');
                    $("#comandos").removeClass("fa-inverse").addClass("text-warning animated rubberBand");
                    toastr.success("Quiz Disponible",'Felicitaciones, has desbloqueado el Quiz de este nivel!');           
                }

                //var $x = evaluar(command);
            }, {
                greetings: 'Interprete de Comandos del Curso, --help-- para ayuda de comandos',
                name: 'curso_git',
                prompt: 'curso_git$> ',
                onBlur: function () {
                    return false;
                }
            });
            
            
            
                         
            
            
        });
        $("#btnQuiz").prop('disabled', true);
        $("#btnQuiz").attr('disabled', 'disabled');
        
        $( "#btnQuiz" ).click(function() {
             var $open = $("#quizOpen").val();
             if($open){
                 $("#btnQuiz").prop('disabled', false);
                 $("#btnQuiz").attr('disabled', false);
             }else{
                var isDisabled = $('#btnQuiz').is('[disabled=disabled]');           
                if (isDisabled){
                    toastr.error("Para desbloquearlo, debes obtener los dos primeros logros de este nivel","Quiz Bloqueado");           
                }
            }
            
        });   
        
        var $palabraGit = /^git$/g;
        var $gitEspacio = /^git+\s/g;
        var $configEspacio = /\bconfig+\s/g;
        var $configGlobal = /\bconfig\s+--global+\s/g;
        var $configUserName = /\bconfig\s+--global+\s+user.name+\s/g;
        var $configUserMail = /\b\s+user.email+\s/g;
        var $respuesta = /\bconfig\s+--global+\s+user.name+\s+"?\w{3,}"?/g;
        var $gitHelp = /^git+\s+\bhelp\s?\w?/g;
        var $gitConfigUser = /^git+\s+\bconfig\s+--global+\s+user.name+\s+"?\w{3,}"?/g;
        var $gitVersion = /^git+\s+--version$/g;
        var $gitConfigMail = /^git+\s+\bconfig\s+--global+\s+user.email+\s+"?\w{3,}"?/g;
        var $gitConfigEditor = /^git+\s+\bconfig\s+--global+\s+core.editor+\s+"?\w{3,}"?/g;
        var $gitConfigColor = /^git+\s+\bconfig\s+--global+\s+color.ui+\s+"?\w{3,}"?/g;
        var $gitConfigLineAuto = /^git+\s+\bconfig\s+--global+\s+core.autocrlf+\s+input/g;
        var $gitConfigLineSafe = /^git+\s+\bconfig\s+--global+\s+core.safecrlf+\s+true/g;
        var $gitConfigList = /^git+\s+\bconfig\s+--list/g;
        var $c = 0;
        var name = "";
        var email = "";
        function evaluar(c) {
            var $w = {};
            console.log(c);
            console.log(c.match($gitVersion));
            if (c.match($gitVersion)) {
                if ($c === 0) {
                    $c = 1;
                    $w = JSON.stringify({out: "git version 2.11.0", chk: true, msg: "Has ejecutado tu primer comando en git.  FELICITACIONES"});
                } else if ($c > 0) {
                    $w = JSON.stringify({out: "git version 2.11.0", chk: "done", msg: "El Comando GIT --VERSION ya lo has ejecutado"});
                }
                var respuesta = JSON.parse($w);
                return (respuesta);
            }

            if (c.match($gitConfigUser)) {

                if ($c === 1) {

                    $c = 2;
                    $w = JSON.stringify({out: " ", chk: true, msg: "Git no muestra ningun mensaje al configurar correctamente alguna variable. Has configurado correctamente tu nombre de usuario"});
                    name = c.substr(c.indexOf("user.name") + 9);
                } else if ($c > 1) {
                    $w = JSON.stringify({out: " ", chk: "done", msg: "Renombrado el usuario satisfactoriamente"});
                    name = c.substr(c.indexOf("user.name") + 9);
                } else {
                    $w = JSON.stringify({out: "Error, debes ejecutar primero el comando de la version instalada de git", chk: false});
                }
                var respuesta = JSON.parse($w);
                return (respuesta);
            }

            if (c.match($gitConfigMail)) {
                if ($c === 2) {
                    $c = 3;
                    $w = JSON.stringify({out: " ", chk: true, msg: "Has configurado correctamente tu dirección de Correo"});
                    email = c.substr(c.indexOf("user.email") + 10);
                } else if ($c > 2) {
                    $w = JSON.stringify({out: " ", chk: "done", msg: "Cambiada la dirección satisfactoriamente"});
                    email = c.substr(c.indexOf("user.email") + 10);
                } else {
                    $w = JSON.stringify({out: "Error, debes configurar primero tu nombre de usuario", chk: false});
                }
                var respuesta = JSON.parse($w);
                return (respuesta);
            }

            if (c.match($gitConfigList)) {
                if ($c === 3) {
                    $c = 4;
                    $w = JSON.stringify({out: "user.email=" + email + "\nuser.name=" + name + "\ncolorui=auto", chk: "plain", msg: "Has revisado tu configuración", fin: true});
                } else if ($c > 3) {
                    $w = JSON.stringify({out: "user.email=" + email + "\nuser.name=" + name + "\ncolorui=auto", chk: "plain", msg: "Ya has ejecutado este comando, puedes verificar tu información para verificar los cambios"});
                } else {
                    $w = JSON.stringify({out: "Error, debes configurar primero tu dirección de correo", chk: false});
                }
                var respuesta = JSON.parse($w);
                return (respuesta);
            }

            if (c.match($gitHelp)) {
                $w = JSON.stringify({out: "\n\nusage: git [--version] [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]\n           [-p|--paginate|--no-pager] [--no-replace-objects] [--bare]\n           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]\n           [-c name=value] [--help]\n           <command> [<args>]\n\n The most commonly used git commands are:\n   add        Add file contents to the index\n   bisect     Find by binary search the change that introduced a bug\n   branch     List, create, or delete branches\n   checkout   Checkout a branch or paths to the working tree\n   clone      Clone a repository into a new directory\n   commit     Record changes to the repository\n   diff       Show changes between commits, commit and working tree, etc\n   fetch      Download objects and refs from another repository\n   grep       Print lines matching a pattern\n   init       Create an empty git repository or reinitialize an existing one\n   log        Show commit logs\n   merge      Join two or more development histories together\n   mv         Move or rename a file, a directory, or a symlink\n   pull       Fetch from and merge with another repository or a local branch\n   push       Update remote refs along with associated objects\n   rebase     Forward-port local commits to the updated upstream head\n   reset      Reset current HEAD to the specified state\n   rm         Remove files from the working tree and from the index\n   show       Show various types of objects\n   status     Show the working tree status\n   tag        Create, list, delete or verify a tag object signed with GPG\n\nSee 'git help <command>' for more information on a specific command.", chk: "plain", msg: "Siempre es bueno consultar la ayuda. "});
                var respuesta = JSON.parse($w);
                return (respuesta);
            }
                      

            $w = JSON.stringify({out: "Error", chk: false});
            var respuesta = JSON.parse($w);
            return (respuesta);

        }



        $(document).ready(function () {
            

            videojs.options.flash.swf = "{{ asset('assets/vendor/moovly/js/videojs/video-js.swf') }}";
            alert(videojs);
            $contador = $("#contadorObtenidos").val();
            alert($contador);
            for (var $i = 0; $i < $contador; $i++){
                $('.progress-bar').css('width', $contador * 30 + '%'); 
                $('.stat-percent').html($contador * 30 + '%');
                $('.progress-bar').attr('aria-valuenow', $contador * 30);
            }
            
            $("#wizard").steps();
            
            // Instance the tour
            var tour = new Tour({
                steps: [{
                        title: "Bienvenido",
                        content: "¿Es la primera vez que ingresas verdad? Pues Entonces <strong>¡Bienvenido!</strong>  A través de esta guía te enseñaremos como está distribuida <i>Tu aula virtual</i> para que comiences de una vez a encender tu conocimiento.<br><br> Puedes utilizar las teclas de navegación izquiera y derecha para desplazarte a lo largo del tour. <br><br><img src='{{ asset('images/course/left-right-arrows.png') }}' alt='An opening code bracket' />",
                        placement: "bottom",
                        backdrop: true,
                        backdropContainer: '#wrapper',
                        orphan: true,
                    },
                    {
                        element: "#tour1",
                        title: "¿En donde estoy?",
                        content: "Contiene el titulo del curso y en que módulo/clase te encuentras, cuantas has aprobado y cuanto te falta para culminar.",
                        placement: "bottom",
                        backdrop: true,
                        backdropContainer: '#wrapper',
                    },
                    {
                        element: "#tour2",
                        title: "Módulos del Curso",
                        content: "Contiene en amarillo tu ubicación actual, en negro lo que falta y en azul lo que has completado.  <strong>Si pasas sobre ellos</strong>, podrás ver el título del módulo",
                        placement: "bottom",
                        onShown: function (tour) {
                            $('body').addClass('tour-open');
                        },
                        onHidden: function (tour) {
                            $('body').removeClass('tour-close');
                        }
                    },
                    {
                        element: "#tour3",
                        title: "Clase Virtual",
                        content: "En esta sección podrás disfrutar de una manera siempre interactiva de la clase correspondiente al módulo donde estás ubicado.  siempre estarán disponibles para ti para cuando las necesites.",
                        placement: "right",
                        backdrop: true,
                        backdropContainer: '#wrapper'
                    },
                    {
                        element: "#tour4",
                        title: "Área de Trabajo",
                        content: "Aquí es donde nos ensuciaremos las manos y encenderemos nuestros conocimientos, colocando manos a la obra sobre los aprendido en la clase virtual.",
                        placement: "left",
                        backdrop: true,
                        backdropContainer: '#wrapper'
                    }
                ]});

            // Initialize the tour
            tour.init();

            $('.startTour').click(function () {
                tour.restart();

                // Start the tour
                // tour.start();
            });

        });


       


        $("#animacion_local").click(function () {

            

        });


        

        $(document).keydown(function (e) {

            var previous = 37, next = 39;

            switch (e.keyCode) {
                case previous:

                    $('.flipbook').turn('previous');

                    break;
                case next:

                    $('.flipbook').turn('next');

                    break;
            }

        });

        function loadApp() {

            // Create the flipbook


            $('.flipbook').turn({
                // Width

                width: 822,
                // Height

                height: 600,
                // Elevation

                elevation: 10,
                // Enable gradients

                gradients: false,
                // Auto center this flipbook

                autoCenter: true

            });
        }

// Load the HTML4 version if there's not CSS transform

        yepnope({
            test: Modernizr.csstransforms,
            yep: ['{{ asset("assets/vendor/turnjs/turn.js") }}'],
            nope: ['{{ asset("assets/vendor/turnjs/turn.html4.min.js") }}'],
            both: ['{{ asset("assets/vendor/turnjs/basic.css") }}'],
            complete: loadApp
        });
        
        
        var $loading = $('#loadingBulb').hide();
        var $guardado = $('#guardado').show();
        $(document)
          .ajaxStart(function () {              
              $guardado.hide();
              $loading.show();
           })
          .ajaxStop(function () {
            $loading.hide();
            $guardado.show();
          });


        $(window).load(function(e) {
            $("#inputConsole").click();
        });

    </script>

{% endblock %}
